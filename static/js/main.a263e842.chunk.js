(this["webpackJsonpslack-clone"]=this["webpackJsonpslack-clone"]||[]).push([[0],{192:function(e,a,t){e.exports=t(329)},202:function(e,a,t){},329:function(e,a,t){"use strict";t.r(a);var n=t(9),r=t(10),s=t(12),l=t(11),o=t(0),c=t.n(o),i=t(33),u=t.n(i),m=t(13),d=t(55),h=t(41),p=t(43),g=t(164),f=(t(201),t(349)),E=(t(202),t(346)),b=t(345),v=t(337),y=t(181),C=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(E.a,{as:b.a,icon:"labeled",inverted:!0,vertical:!0,visible:!0,width:"very thin"},c.a.createElement(v.a,null),c.a.createElement(y.a,{icon:"add",size:"small",color:"blue"}))}}]),t}(c.a.Component),O=t(350),j=t(44),w=t(341),k=t(180),S=t(115),U=t.n(S);t(308),t(310),t(330);U.a.initializeApp({apiKey:"AIzaSyDm0ivj5TqTQ8j87LgNxf0gYdNJbcO9Dy4",authDomain:"slack-clone-188bc.firebaseapp.com",databaseURL:"https://slack-clone-188bc.firebaseio.com",projectId:"slack-clone-188bc",storageBucket:"slack-clone-188bc.appspot.com",messagingSenderId:"808662212536",appId:"1:808662212536:web:79a4c351a882f7b219b94d",measurementId:"G-592NGDLKS4"});var N=U.a,A=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).dropDownOptions=function(){return[{key:"user",text:c.a.createElement("span",null,"Signed in as ",c.a.createElement("strong",null,e.props.currentUser.displayName)),disabled:!0},{key:"avatar",text:c.a.createElement("span",null,"Change Avatar")},{key:"signout",text:c.a.createElement("span",{onClick:e.handleSignout},"SignOut")}]},e.handleSignout=function(){N.auth().signOut().then((function(){return console.log("signed_out")}))},e}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(f.a,{style:{background:"#4c3c4c"}},c.a.createElement(f.a.Column,null,c.a.createElement(f.a.Row,{style:{padding:"1.2em",margin:0}},c.a.createElement(O.a,{inverted:!0,floated:"left",as:"h2"},c.a.createElement(j.a,{name:"code"}),c.a.createElement(O.a.Content,null,"Nerd-Chat")),c.a.createElement(O.a,{style:{padding:"0.25em"},as:"h4"},c.a.createElement(w.a,{trigger:c.a.createElement("span",null,c.a.createElement(k.a,{src:this.props.currentUser.photoURL,space:"right",avatar:!0}),this.props.currentUser.displayName),options:this.dropDownOptions()})))))}}]),t}(c.a.Component),L=t(28),R=t(343),M=t(340),P=t(338),x=t(118),D=function(e){return{type:"CHANGE_CHANNEL",payload:{currentChannel:e}}},I=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={channels:[],modal:!1,firstLoad:!0,channelName:"",channelDetail:"",channelsRef:N.database().ref("channels"),currentUser:e.props.currentUser,activeChannelID:""},e.removeListener=function(){e.state.channelsRef.off()},e.closeModal=function(){return e.setState({modal:!1})},e.openModal=function(){return e.setState({modal:!0})},e.handleChange=function(a){e.setState(Object(L.a)({},a.target.name,a.target.value))},e.isFormValid=function(e){var a=e.channelName,t=e.channelDetail;return a&&t},e.handleSubmit=function(){e.isFormValid(e.state)&&e.addChannel()},e.addChannel=function(){var a=e.state,t=a.channelsRef,n=a.channelName,r=a.channelDetail,s=a.currentUser,l=t.push().key,o={id:l,name:n,deatils:r,createdBy:{name:s.displayName,avatar:s.photoURL}};t.child(l).update(o).then((function(){e.setState({channelName:"",channelDetail:""}),e.closeModal()})).catch((function(e){console.log(e)}))},e.setFirstChannel=function(){if(e.state.firstLoad&&e.state.channels.length>0){var a=e.state.channels[0];e.setActiveChannel(a),e.props.channelChange(a),e.setState({firstLoad:!1})}},e.setActiveChannel=function(a){e.setState({activeChannel:a.id})},e.addListener=function(){var a=[];e.state.channelsRef.on("child_added",(function(t){a.push(t.val()),e.setState({channels:a},(function(){return e.setFirstChannel()}))}))},e.channelChange=function(a){e.setActiveChannel(a),e.props.channelChange(a)},e.displayChannels=function(a){if(a.length)return a.map((function(a){return c.a.createElement(b.a.Item,{key:a.id,onClick:function(){return e.channelChange(a)},name:a.name,style:{opacity:.7}},"# ",a.name)}))},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.addListener()}},{key:"componentWillUnmount",value:function(){this.removeListener()}},{key:"render",value:function(){var e=this.state,a=e.channels,t=e.modal;return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a.Menu,{style:{paddingBottom:"2em"}},c.a.createElement(b.a.Item,null,c.a.createElement("span",null,c.a.createElement(j.a,{name:"exchange"}),"Nerd Groups"," "),"(",a.length,")",c.a.createElement(j.a,{name:"add",onClick:this.openModal}),this.displayChannels(this.state.channels))),c.a.createElement(R.a,{basic:!0,open:t,onClose:this.closeModal},c.a.createElement(R.a.Header,null,"Create a Nerd Group"),c.a.createElement(R.a.Content,null,c.a.createElement(M.a,{onSubmit:this.handleSubmit},c.a.createElement(M.a.Field,null,c.a.createElement(P.a,{fluid:!0,label:"Name of group",name:"channelName",onChange:this.handleChange})),c.a.createElement(M.a.Field,null,c.a.createElement(P.a,{fluid:!0,label:"Deatils of group",name:"channelDetail",onChange:this.handleChange})))),c.a.createElement(x.a,null,c.a.createElement(y.a,{color:"green",inverted:!0,onClick:this.handleSubmit},c.a.createElement(j.a,{name:"checkmark"})," Add"),c.a.createElement(y.a,{color:"red",inverted:!0,onClick:this.closeModal},c.a.createElement(j.a,{name:"remove"})," Cancel"))))}}]),t}(c.a.Component),F=Object(p.b)(null,{channelChange:D})(I),_=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(b.a,{size:"large",inverted:!0,fixed:"left",vertical:!0,style:{background:"#4c3c4c",fontSize:"1.2rem"}},c.a.createElement(A,{currentUser:this.props.currentUser}),c.a.createElement(F,{currentUser:this.props.currentUser}))}}]),t}(c.a.Component),z=t(351),T=t(342),V=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(z.a,{clearing:!0}," ",c.a.createElement(O.a,{as:"h2",floated:!0,style:{marginBottom:0}},c.a.createElement("span",null,this.props.currentChannel&&this.props.currentChannel.name,c.a.createElement(j.a,{name:"star outline",color:"black"})),c.a.createElement(O.a.Subheader,null,"2 Users")),c.a.createElement(O.a,{floated:"right"},c.a.createElement(P.a,{size:"mini",icon:"search",name:"searchTerm",placeholder:"Search Messages"})))}}]),t}(c.a.Component),W=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={message:"",currentChannel:e.props.currentChannel,currentUser:e.props.currentUser,loading:!1,errors:[]},e.handleChange=function(a){e.setState(Object(L.a)({},a.target.name,a.target.value))},e.createMessage=function(){return{timestamp:N.database.ServerValue.TIMESTAMP,user:{id:e.state.currentUser.uid,name:e.state.currentUser.displayName,avatar:e.state.currentUser.photoURL},content:e.state.message}},e.sendMessage=function(){var a=e.props,t=a.messagesRef,n=a.currentChannel;e.state.message?t.child(n.id).push().set(e.createMessage()).then((function(){e.setState({loading:!1,message:"",errors:[]})})).catch((function(a){console.error(a),e.setState({loading:!1,errors:e.state.errors.concat(a)})})):e.setState({errors:e.state.errors.concat({message:"Add the Message"})})},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.state,a=e.errors,t=e.loading,n=e.message;return c.a.createElement(z.a,{className:"message__form"},c.a.createElement(P.a,{fluid:!0,name:"message",onChange:this.handleChange,value:n,style:{marginBottom:"0.7em"},label:c.a.createElement(y.a,{icon:"add"}),labelPosition:"left",placeholder:"Write your message",className:a.some((function(e){return e.message.toLowerCase().includes("message")}))?"error":""}),c.a.createElement(y.a.Group,{icon:!0,widths:"2"},c.a.createElement(y.a,{color:"orange",content:"Add Reply",onClick:this.sendMessage,labelPosition:"left",icon:"edit",disabled:t}),c.a.createElement(y.a,{color:"teal",content:"Upload Media",labelPosition:"right",icon:"cloud upload"})))}}]),t}(c.a.Component),G=t(178),B=t.n(G),H=function(e,a){return a.uid===e.user.uid?"message__self":""},J=function(e){var a,t=e.message,n=e.user;return t&&n?c.a.createElement(T.a,null,c.a.createElement(T.a.Avatar,{src:t.user.avatar}),c.a.createElement(T.a.Content,{className:H(t,n)},c.a.createElement(T.a.Author,{as:"a"},t.user.name),c.a.createElement(T.a.Metadata,null,(a=t.timestamp,B()(a).fromNow())),c.a.createElement(T.a.Text,null,t.content))):c.a.createElement("div",null)},q=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={messagesRef:N.database().ref("messages"),currentChannel:e.props.currentChannel,currentUser:e.props.currentUser,messages:[],messageLoading:!0},e.addListener=function(a){e.addMessageListner(a)},e.addMessageListner=function(a){var t=[];e.state.messagesRef.child(a).on("child_added",(function(a){t.push(a.val()),e.setState({messages:t,messageLoading:!1})}))},e.displayMessages=function(a){return a.length>0&&a.map((function(a){return c.a.createElement(J,{key:a.timestamp,message:a,user:e.state.currentUser})}))},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,a=e.currentChannel,t=e.currentUser;a&&t&&this.addListener(a.id)}},{key:"render",value:function(){var e=this.state,a=e.messagesRef,t=e.messages,n=e.currentChannel,r=e.currentUser;return c.a.createElement(c.a.Fragment,null,c.a.createElement(V,{currentChannel:n}),c.a.createElement(z.a,null,c.a.createElement(T.a.Group,{className:"messages"},this.displayMessages(t))),c.a.createElement(W,{messagesRef:a,currentChannel:n,currentUser:r}))}}]),t}(c.a.Component),K=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null," ")}}]),t}(c.a.Component),Q=Object(p.b)((function(e){return{user:e.user.currentUser,channel:e.channel.currentChannel}}))((function(e){return c.a.createElement(f.a,{columns:"equal",className:"app",style:{background:"#eee"}},c.a.createElement(C,null),c.a.createElement(_,{key:e.user&&e.user.uid,currentUser:e.user}),c.a.createElement(f.a.Column,{style:{marginLeft:320}},c.a.createElement(q,{key:e.channel&&e.channel.id,currentChannel:e.channel,currentUser:e.user})),c.a.createElement(f.a.Column,{width:4},c.a.createElement(K,null)))})),Y=t(344),$=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={email:"",password:"",errors:[],loading:!1},e.handleChange=function(a){e.setState(Object(L.a)({},a.target.name,a.target.value))},e.isFormValid=function(a){var t=a.email,n=a.password;if(e.setState({errors:[]}),t.length){if(n.length)return!0;e.setState({errors:[{message:"Enter Password"}]})}else{e.setState({errors:[{message:"Enter Email"}]})}},e.handleSubmit=function(a){a.preventDefault(),e.isFormValid(e.state)&&(e.setState({errors:[],loading:!0}),N.auth().signInWithEmailAndPassword(e.state.email,e.state.password).then((function(a){e.setState({loading:!1})})).catch((function(a){e.setState({loading:!1,errors:e.state.errors.concat(a)})})))},e.handleErrors=function(e,a){return e.some((function(e){return e.message.toLowerCase().includes(a)}))?"error":""},e.displayErrors=function(e){return e.map((function(e,a){return c.a.createElement("p",{key:a},e.message)}))},e}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(f.a,{textAlign:"center",verticalAlign:"middle",className:"login"},c.a.createElement(f.a.Column,{style:{maxWidth:450}},c.a.createElement(O.a,{as:"h1",icon:!0,color:"yellow",textAlign:"center"},c.a.createElement(j.a,{name:"code branch",color:"yellow"}),"Login for Nerd-Chat"),c.a.createElement(M.a,{size:"large",onSubmit:this.handleSubmit},c.a.createElement(z.a,{stacked:!0},c.a.createElement(M.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Adress",onChange:this.handleChange,type:"email",style:{backgroundColor:"rgba(0, 0, 0, 0)"},className:this.handleErrors(this.state.errors,"email")}),c.a.createElement(M.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleChange,type:"password",className:this.handleErrors(this.state.errors,"password"),style:{backgroundColor:"rgba(0, 0, 0, 0)"}}),c.a.createElement(y.a,{disabled:this.state.loading,color:"black",className:this.state.loading?"loading":"",fluid:!0,size:"large"},"Submit"))),this.state.errors.length>0&&c.a.createElement(Y.a,{error:!0},c.a.createElement("h3",null,"Error"),this.displayErrors(this.state.errors)),c.a.createElement(Y.a,{style:{backgroundColor:"rgba(0, 0, 0, 0)"},textAlign:"left"},c.a.createElement(d.b,{to:"/register"},"New User! "))))}}]),t}(c.a.Component),X=t(179),Z=t.n(X),ee=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={username:"",email:"",password:"",passwordconfirmation:"",errors:[],loading:!1,userRef:N.database().ref("users")},e.handleChange=function(a){e.setState(Object(L.a)({},a.target.name,a.target.value))},e.isFormEmpty=function(e){var a=e.username,t=e.email,n=e.password,r=e.passwordconfirmation;return!a.length||!t.length||!n.length||!r.length},e.isPasswordValid=function(e){var a=e.password,t=e.passwordconfirmation;return!(a.length<6||t.length<6||a!==t)},e.isFormValid=function(){var a,t=[];return e.isFormEmpty(e.state)?(a={message:"Fill all details"},e.setState({errors:t.concat(a)}),!1):!!e.isPasswordValid(e.state)||(a={message:"Password is not valid"},e.setState({errors:t.concat(a)}),!1)},e.saveUser=function(a){return e.state.userRef.child(a.user.uid).set({name:a.user.displayName,avatar:a.user.photoURL}),Promise.resolve(1)},e.handleSubmit=function(a){a.preventDefault(),e.isFormValid()&&(e.setState({errors:[],loading:!0}),N.auth().createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(a){a.user.updateProfile({displayName:e.state.username,photoURL:"https://gravatar.com/avatar/".concat(Z()(a.user.email),"?d=identicon")}).then((function(){e.saveUser(a).then((function(){e.setState({loading:!1})})).catch((function(a){e.setState({errors:e.state.errors.concat(a),loading:!1})}))})).catch((function(a){e.setState({errors:e.state.errors.concat(a),loading:!1})}))})).catch((function(a){e.setState({errors:e.state.errors.concat(a),loading:!1})})))},e.handleErrors=function(e,a){return e.some((function(e){return e.message.toLowerCase().includes(a)}))?"error":""},e.displayErrors=function(e){return e.map((function(e,a){return c.a.createElement("p",{key:a},e.message)}))},e}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(f.a,{textAlign:"center",verticalAlign:"middle",className:"register"},c.a.createElement(f.a.Column,{style:{maxWidth:450}},c.a.createElement(O.a,{as:"h2",icon:!0,color:"yellow",textAlign:"center"},"Register for Nerd-Chat"),c.a.createElement(M.a,{size:"large",onSubmit:this.handleSubmit},c.a.createElement(z.a,{stacked:!0},c.a.createElement(M.a.Input,{fluid:!0,name:"username",icon:"user",iconPosition:"left",placeholder:"Username",onChange:this.handleChange,type:"text",className:this.handleErrors(this.state.errors,"username")}),c.a.createElement(M.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Adress",onChange:this.handleChange,type:"email",className:this.handleErrors(this.state.errors,"email")}),c.a.createElement(M.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleChange,type:"password",className:this.handleErrors(this.state.errors,"password")}),c.a.createElement(M.a.Input,{fluid:!0,name:"passwordconfirmation",icon:"lock",iconPosition:"left",placeholder:"Confirm Password",onChange:this.handleChange,type:"password",className:this.handleErrors(this.state.errors,"password")}),c.a.createElement(y.a,{disabled:this.state.loading,color:"black",className:this.state.loading?"loading":"",fluid:!0,size:"large"},"Submit"))),this.state.errors.length>0&&c.a.createElement(Y.a,{error:!0},c.a.createElement("h3",null,"Error"),this.displayErrors(this.state.errors)),c.a.createElement(Y.a,{color:"white",style:{backgroundColor:"rgba(0, 0, 0, 0)"}},c.a.createElement(d.b,{to:"/login"}," Already a User!"))))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=t(59),te={currentUser:null,isLoading:!0},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":return{currentUser:a.payload.currentUser,isLoading:!1};case"CLEAR_USER":return Object(ae.a)(Object(ae.a)({},e),{},{isLoading:!1});default:return e}},re={currentChannel:null},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CHANGE_CHANNEL":return Object(ae.a)(Object(ae.a)({},e),{},{currentChannel:a.payload.currentChannel});default:return e}},le=Object(h.combineReducers)({user:ne,channel:se}),oe=function(e){return{type:"SET_USER",payload:{currentUser:e}}},ce=function(){return{type:"CLEAR_USER"}},ie=t(348),ue=t(339),me=function(){return c.a.createElement(ie.a,null,c.a.createElement(ue.a,{size:"huge",content:"Preparing Chat"}))},de=Object(h.createStore)(le,Object(g.composeWithDevTools)()),he=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.auth().onAuthStateChanged((function(a){a?(e.props.setUser(a),e.props.history.push("/")):(e.props.history.push("/login"),e.props.clearUser())}))}},{key:"render",value:function(){return this.props.isLoading?c.a.createElement(me,null):c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/",component:Q}),c.a.createElement(m.a,{exact:!0,path:"/login",component:$}),c.a.createElement(m.a,{exact:!0,path:"/register",component:ee}))}}]),t}(c.a.Component),pe=Object(m.f)(Object(p.b)((function(e){return{isLoading:e.user.isLoading,user:e.user.currentUser}}),{setUser:oe,clearUser:ce})(he));u.a.render(c.a.createElement(p.a,{store:de},c.a.createElement(d.a,null,c.a.createElement(pe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[192,1,2]]]);
//# sourceMappingURL=main.a263e842.chunk.js.map